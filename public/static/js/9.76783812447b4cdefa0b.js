webpackJsonp([9,42,92,93],{"1M1X":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("MVsr"),i={props:{id:{type:Number,default:null}},methods:{handleButtonClick:function(e){console.log("click left button",e)},handleMenuClick:function(e){var t=this;console.log("click",e.key),console.log(this.id),Object(n.e)({id:this.id,status:e.key}).then(function(e){t.$emit("update"),t.$message.success(e.message)})}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{display:"inline"}},[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:e.handleMenuClick},slot:"overlay"},[e.hasPermission("stock.no_deal")?a("a-menu-item",{key:"5"},[a("a-icon",{attrs:{type:"warning"}}),e._v("设置为可出库(不可交易)")],1):e._e(),e._v(" "),e.hasPermission("stock.used")?a("a-menu-item",{key:"2"},[a("a-icon",{attrs:{type:"warning"}}),e._v("设置为已使用")],1):e._e(),e._v(" "),e.hasPermission("stock.effective")?a("a-menu-item",{key:"1"},[a("a-icon",{attrs:{type:"warning"}}),e._v("设置为正常有效")],1):e._e(),e._v(" "),e.hasPermission("stock.forbidden")?a("a-menu-item",{key:"7"},[a("a-icon",{attrs:{type:"warning"}}),e._v("禁止使用")],1):e._e()],1),e._v(" "),a("a-button",{staticStyle:{"margin-left":"8px"},attrs:{size:"small"}},[e._v(" 操作 "),a("a-icon",{attrs:{type:"down"}})],1)],1)],1)},staticRenderFns:[]},s=a("VU/8")(i,o,!1,null,null,null);t.default=s.exports},"1ek0":function(e,t){},KShS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("AaXs"),i=a("rxb8"),o=a("vMJZ"),s=a("MVsr"),r=a("T6ww"),l=a("qRUo"),c=a("3UNf"),d={components:{StartTime:r.default,EndTime:l.default},data:function(){return{formLayout:"horizontal",form:this.$form.createForm(this,{name:"coordinated"}),games:[],prices:[],users:[]}},created:function(){this.getGameList()},methods:{handleSubmit:function(e){var t=this;e.preventDefault(),this.form.validateFields(function(e,a){e||(console.log("Received values of form: ",a),t.$emit("search",a))})},exportStock:function(){console.log(this.form.getFieldsValue()),Object(s.c)(this.form.getFieldsValue()).then(function(e){console.log(e);c(e.data,"库存列表.xlsx")})},handleGameChange:function(e){console.log("selected "+e),this.form.setFieldsValue({price_id:void 0}),this.getPriceList(e)},handleTypeChange:function(e){this.form.setFieldsValue({user_id:void 0}),this.getUserList(e)},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0},getGameList:function(){var e=this;Object(n.e)().then(function(t){e.games=t.data})},getPriceList:function(e){var t=this;Object(i.g)({game_id:e}).then(function(e){t.prices=e.data})},getUserList:function(e){var t=this;Object(o.p)({user_type:e}).then(function(e){t.users=e.data})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"z-index":"999",height:"100%"}},[a("a-form",{attrs:{form:e.form},on:{submit:e.handleSubmit}},[a("a-row",{staticStyle:{"margin-left":"10px",clear:"both"}},[a("a-col",{staticStyle:{clear:"both"},attrs:{span:22}},[a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["game_id"],expression:"['game_id']"}],attrs:{showSearch:"",placeholder:"选择游戏",optionFilterProp:"children",filterOption:e.filterOption,allowClear:"",size:"small"},on:{change:e.handleGameChange}},e._l(e.games,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_type"],expression:"['user_type']"}],attrs:{showSearch:"",placeholder:"选择账户类型",allowClear:"",size:"small"},on:{change:e.handleTypeChange}},[a("a-select-option",{attrs:{value:"son"}},[e._v("子账户")]),e._v(" "),a("a-select-option",{attrs:{value:"user"}},[e._v("主账户")])],1)],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["identifier"],expression:"['identifier']"}],attrs:{allowClear:"",placeholder:"请输入库存单号",size:"small"}})],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("start-time",{directives:[{name:"decorator",rawName:"v-decorator",value:["start_time"],expression:"['start_time']"}]})],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["price_id"],expression:"['price_id']"}],attrs:{showSearch:"",placeholder:"选择面值",optionFilterProp:"children",filterOption:e.filterOption,allowClear:"",size:"small"}},e._l(e.prices,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.gold))])}),1)],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["user_id"],expression:"['user_id']"}],attrs:{showSearch:"",placeholder:"选择用户",optionFilterProp:"children",filterOption:e.filterOption,allowClear:"",size:"small"}},e._l(e.users,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.name))])}),1)],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["status"],expression:"['status']"}],attrs:{showSearch:"",placeholder:"选择库存状态",optionFilterProp:"children",allowClear:"",size:"small"}},[a("a-select-option",{attrs:{value:"1"}},[e._v("正常有效")]),e._v(" "),a("a-select-option",{attrs:{value:"2"}},[e._v("已被使用")]),e._v(" "),a("a-select-option",{attrs:{value:"4"}},[e._v("使用失败")]),e._v(" "),a("a-select-option",{attrs:{value:"5"}},[e._v("后台恢复")]),e._v(" "),a("a-select-option",{attrs:{value:"6"}},[e._v("已经获取")]),e._v(" "),a("a-select-option",{attrs:{value:"7"}},[e._v("禁止使用")]),e._v(" "),a("a-select-option",{attrs:{value:"8"}},[e._v("库存上架")])],1)],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("end-time",{directives:[{name:"decorator",rawName:"v-decorator",value:["end_time"],expression:"['end_time']"}]})],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:20,sm:16,md:12,lg:8,xl:6}},[a("a-form-item",[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{allowClear:"",placeholder:"请输入库存id",size:"small"}})],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:10,sm:10,md:10,lg:3,xl:2}},[a("a-form-item",[a("a-button",{attrs:{size:"small",type:"primary","html-type":"submit"}},[e._v("搜索")])],1)],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"10px"},attrs:{xs:10,sm:10,md:10,lg:3,xl:2}},[e.hasPermission("stock.export")?a("a-form-item",[a("a-button",{attrs:{size:"small",type:"primary"},on:{click:e.exportStock}},[e._v("导出")])],1):e._e()],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=a("VU/8")(d,p,!1,function(e){a("1ek0")},"data-v-eb23d024",null);t.default=u.exports},btPY:function(e,t){},d5cH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),i=a.n(n),o=a("Dd8w"),s=a.n(o),r=a("MVsr"),l=a("1M1X"),c=a("khHb"),d=a("KShS"),p=[{title:"id",dataIndex:"id",sorter:!0,align:"center"},{title:"游戏名称",key:"game",align:"center",scopedSlots:{customRender:"game"}},{title:"面值名称",key:"price",align:"center",scopedSlots:{customRender:"price"}},{title:"面值价格",key:"money",align:"center",scopedSlots:{customRender:"money"}},{title:"库存单号",dataIndex:"identifier",align:"center"},{title:"所属用户",key:"owner_user_id",align:"center",scopedSlots:{customRender:"owner_user_id"}},{title:"状态",dataIndex:"status",align:"center"},{title:"入库时间",dataIndex:"created_at",align:"center"},{title:"使用时间",dataIndex:"use_time",align:"center",scopedSlots:{customRender:"use_time"}},{title:"币值",dataIndex:"currency",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center"}],u={components:{DropDown:l.default,Detail:c.default,OnSearch:d.default},beforeCreate:function(){this.form=this.$form.createForm(this,{name:"normal_login"})},created:function(){this.role_id=this.$store.getters.info.role_id},watch:{},data:function(){return{data:[],pagination:{pageSize:this.$store.getters.pagesize},loading:!1,columns:p,selectedRowKeys:[],role_id:1,name:"",filters:{},search:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize})},methods:{onSearch:function(e){this.search=e,this.fetch(s()({},e,{pageSize:this.pagination.pageSize}))},onUpdate:function(){this.fetch(s()({},this.getPagination(),this.search))},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},status:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this;status({id:e}).then(function(e){t.fetch(t.getPagination())})}),handleTableChange:function(e,t,a){var n=s()({},this.pagination);n.current=e.current,n.sortField=a.field,n.sortOrder=a.order,this.pagination=n,this.filters=t,this.fetch(s()({pageSize:e.pageSize,page:e.current,sortField:a.field,sortOrder:a.order},t,this.search))},fetch:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(r.d)(t).then(function(t){console.log(t.data);var a=s()({},e.pagination),n=t.data;e.data=n.data,a.total=n.total,e.pagination=a,e.loading=!1})},destroyAll:function(){this.$destroyAll()},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e},del:function(e){var t=this;this.$confirm({content:"确认删除？",cancelText:"取消",okText:"删除",onOk:function(){return new i.a(function(e,a){Object(r.a)({id:t.selectedRowKeys}).then(function(e){t.$message.success(e.message),t.fetch(s()({pageSize:t.pagination.pageSize,page:t.pagination.current,sortField:t.pagination.sortField,sortOrder:t.pagination.sortOrder},t.filters)),t.destroyAll(),t.selectedRowKeys=[]})})},onCancel:function(){t.destroyAll(),t.$message.info("取消删除",2)}})}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-row",{staticStyle:{"z-index":"2","margin-bottom":"60px"}},[a("a-col",{attrs:{span:20}},[a("on-search",{on:{search:e.onSearch}})],1),e._v(" "),a("a-col",{staticStyle:{"margin-top":"17px"},attrs:{span:2}},[e.hasPermission("stock.delete")?a("a-button",{attrs:{type:"danger",size:"small",disabled:e.selectedRowKeys.length<1},on:{click:e.del}},[e._v("删除凭证")]):e._e()],1)],1),e._v(" "),a("a-row",[a("a-col",{staticStyle:{"margin-top":"25px"}},[a("a-table",{attrs:{columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading,scroll:{x:1300},rowSelection:1==e.role_id?{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}:null},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"game",fn:function(t){return a("span",{},[e._v(e._s(t.price.game.name))])}},{key:"price",fn:function(t){return a("span",{},[e._v(e._s(t.price.gold))])}},{key:"money",fn:function(t){return a("span",{},[e._v(e._s(t.price.money))])}},{key:"owner_user_id",fn:function(t){return a("span",{},[t.son?a("div",[e._v(e._s(t.son.name))]):a("div",[e._v(e._s(t.user.name))])])}},{key:"use_time",fn:function(t){return t?a("span",{},[e._v(e._s(t))]):a("span",{attrs:{slot:"use_time"},slot:"use_time"},[e._v("未使用")])}},{key:"parent",fn:function(t){return t?a("span",{},[e._v(e._s(t.title))]):a("span",{attrs:{slot:"parent"},slot:"parent"},[e._v("无")])}},{key:"action",fn:function(t){return a("span",{},[a("drop-down",{attrs:{id:t.id},on:{update:e.onUpdate}}),e._v(" "),e.hasPermission("stock.detail")?a("detail",{attrs:{text:t}}):e._e()],1)}}],null,!0)})],1)],1),e._v(" "),a("a-divider")],1)},staticRenderFns:[]};var h=a("VU/8")(u,m,!1,function(e){a("btPY")},"data-v-087ecec7",null);t.default=h.exports},khHb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("//Fk"),i=a.n(n),o=a("ROKw"),s=a("MVsr"),r=(a("/Luh"),{props:{text:{type:Object,default:null}},data:function(){return{visible:!1,pStyle:{fontSize:"16px",color:"rgba(0,0,0,0.85)",lineHeight:"24px",display:"block",marginBottom:"16px"},pStyle2:{marginBottom:"24px"},apple:{}}},components:{descriptionItem:o.default},methods:{showDrawer:function(){this.detail(),console.log(this.text)},onClose:function(){this.visible=!1},detail:function(){var e=this;new i.a(function(t){Object(s.b)({id:e.text.id}).then(function(t){console.log(t),e.apple=t.data,e.visible=!0})})},changeActivekey:function(e){console.log(e)}}}),l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{style:{display:"inline"}},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:e.showDrawer}},[e._v("详")]),e._v(" "),a("a-drawer",{attrs:{width:"640",placement:"right",closable:!0,visible:e.visible},on:{close:e.onClose}},[a("p",{staticStyle:{"text-align":"center"},style:[e.pStyle,e.pStyle2]},[e._v("凭证详情")]),e._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"入库人：",content:e.text.input.name}})],1),e._v(" "),a("a-col",{attrs:{span:12}},[e.text.son?a("description-item",{attrs:{title:"所有者：",content:e.text.son.name}}):a("description-item",{attrs:{title:"所有者：",content:e.text.user.name}})],1)],1),e._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"游戏名称：",content:e.text.price.game.name}})],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"面值名称：",content:e.text.price.gold}})],1)],1),e._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"面值价格：",content:e.text.price.money}})],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"库存单号：",content:e.apple.identifier}})],1)],1),e._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"入库时间：",content:e.text.created_at}})],1),e._v(" "),a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"币值：",content:e.text.currency}})],1)],1),e._v(" "),a("a-row",[a("a-col",{attrs:{span:12}},[a("description-item",{attrs:{title:"购买时间：",content:e.apple.buy_time}})],1)],1),e._v(" "),a("a-divider"),e._v(" "),a("a-row",[a("a-collapse",{on:{change:e.changeActivekey}},[a("a-collapse-panel",{key:"1",style:{textAlign:"center"},attrs:{header:"凭证内容",showArrow:!1}},[a("p",[e._v(e._s(e.apple.receipt))])])],1)],1)],1)],1)},staticRenderFns:[]},c=a("VU/8")(r,l,!1,null,null,null);t.default=c.exports}});
//# sourceMappingURL=9.76783812447b4cdefa0b.js.map