webpackJsonp([23],{csJa:function(t,n){},xyFY:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=e("//Fk"),i=e.n(a),o=e("Dd8w"),r=e.n(o),c=e("rxb8"),s=e("uKtY"),l=e("yxO8"),d=e("icdD"),g=[{title:"id",dataIndex:"id",sorter:!0,align:"center"},{title:"游戏名称",dataIndex:"name",align:"center"},{title:"面值名称",dataIndex:"gold",align:"center"},{title:"面值标识",dataIndex:"title",align:"center"},{title:"面值价格",dataIndex:"money",align:"center"},{title:"创建时间",dataIndex:"created_at",align:"center"},{title:"状态",dataIndex:"status",align:"center"},{title:"操作",key:"action",scopedSlots:{customRender:"action"},align:"center",width:150}],u={components:{PriceAdd:s.default,PriceEdit:l.default,GameSearch:d.default},data:function(){return{data:[],pagination:{pageSize:15},loading:!1,columns:g,gold:"",filters:{}}},mounted:function(){this.fetch({pageSize:this.pagination.pageSize}),console.log(this.config)},watch:{gold:function(t,n){""==t&&this.fetch({pageSize:this.pagination.pageSize})}},methods:{onSearch:function(t){var n=this;if(""==t.trim())return!1;Object(c.e)({gold:t}).then(function(t){console.log(t),n.data=t.data.data;var e=r()({},n.pagination);e.total=t.data.total,n.pagination=e})},getPagination:function(){return{pageSize:this.pagination.pageSize,page:this.pagination.current,sortField:this.pagination.sortField,sortOrder:this.pagination.sortOrder}},onAdd:function(){this.fetch({pageSize:this.pagination.pageSize})},onEdit:function(){this.fetch(this.getPagination())},onSelect:function(t){this.fetch(r()({},this.pagination,{game_id:t}))},status:function(t){var n=this;Object(c.i)({id:t}).then(function(t){console.log(t),n.fetch(n.getPagination())})},pass:function(t){var n=this;this.$confirm({content:"确认入库跳过该面值验证？",cancelText:"取消",okText:"跳过",onOk:function(){return new i.a(function(e,a){Object(c.f)({id:t}).then(function(t){n.fetch(n.getPagination()),n.destroyAll()})})},onCancel:function(){n.destroyAll(),n.$message.info("取消跳过",2)}})},handleTableChange:function(t,n,e){var a=r()({},this.pagination);a.current=t.current,a.sortField=e.field,a.sortOrder=e.order,this.pagination=a,this.filters=n,this.fetch(r()({pageSize:t.pageSize,page:t.current,sortField:e.field,sortOrder:e.order},n))},fetch:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.loading=!0,Object(c.e)(n).then(function(n){console.log(n.data);var e=r()({},t.pagination),a=n.data;t.data=a.data,e.total=a.total,t.pagination=e,t.loading=!1})},del:function(t){var n=this;this.$confirm({content:"确认删除？",cancelText:"取消",okText:"删除",onOk:function(){return new i.a(function(e,a){Object(c.b)({id:t}).then(function(t){n.$message.success("删除成功"),n.fetch(r()({pageSize:n.pagination.pageSize,page:n.pagination.current,sortField:n.pagination.sortField,sortOrder:n.pagination.sortOrder},n.filters)),n.destroyAll()})})},onCancel:function(){n.destroyAll(),n.$message.info("取消删除",2)}})},destroyAll:function(){this.$destroyAll()}}},f={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",[e("a-row",[e("a-col",{attrs:{span:3,xs:24,sm:3,md:3,lg:2}},[e("price-add",{attrs:{"on-add":t.onAdd}})],1),t._v(" "),e("a-col",{attrs:{xs:24,sm:10,md:10,lg:5}},[e("game-search",{on:{select:t.onSelect}})],1),t._v(" "),e("a-col",{attrs:{span:8,xs:24,sm:8,md:8,lg:6}},[e("a-input-search",{attrs:{allowClear:"",placeholder:"请输入面值名称",enterButton:""},on:{search:t.onSearch},model:{value:t.gold,callback:function(n){t.gold=n},expression:"gold"}})],1)],1),t._v(" "),e("a-row",[e("a-col",[e("a-table",{attrs:{columns:t.columns,rowKey:function(t){return t.id},dataSource:t.data,pagination:t.pagination,loading:t.loading},on:{change:t.handleTableChange},scopedSlots:t._u([{key:"action",fn:function(n){return e("span",{},[e("price-edit",{attrs:{id:n.id,"on-edit":t.onEdit}}),t._v(" "),e("a-button",{attrs:{size:"small",type:"danger",icon:"delete"},on:{click:function(e){return t.del(n.id)}}}),t._v(" "),e("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.status(n.id)}}},[t._v(t._s("禁用"==n.status?"启":"禁"))]),t._v(" "),e("a-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.pass(n.id)}}},[t._v("跳")])],1)}}])})],1)],1),t._v(" "),e("a-divider")],1)},staticRenderFns:[]};var h=e("VU/8")(u,f,!1,function(t){e("csJa")},null,null);n.default=h.exports}});
//# sourceMappingURL=23.3a43036773e8b2bfc269.js.map